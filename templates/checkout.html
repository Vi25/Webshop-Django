{% extends 'base.html' %} 
{% load static %} 
{% load crispy_forms_tags %}

{% block content %}


   <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      .form-control {
    display: block;
    width: 100%;
    height: calc(1.5em + .75rem + 2px);
    padding: .375rem .75rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #495057;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da !important;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}


    </style>
  
 
    <div class="container">
  <div class="py-5 text-center">
    <img class="d-block mx-auto mb-4" src="{% static 'images/checkout_logo.jpg' %}" alt="" width="72" height="72">
    <h2>Checkout form</h2>
    <p class="lead">Below is checkout form. Please filling in the blank. Shipping Address is where you receive your stuffs, Billing Address is where we collect the payment, they both will printed on the invoice</p>
  </div>

  <div class="row">

{#    <div class="col-md-8 order-md-1 card" >#}
{#    	#}
{#      <h4 class="mb-3" style=" margin-top: 26px;">Billing address</h4>#}
{#      <form method="POST" class="needs-validation" novalidate>#}
{#      	{% csrf_token %}#}
{#        <div class="mb-3">#}
{#          <label for="address">Address</label>#}
{#          {{ form.street_address }}#}
{#        </div>#}
{#        <div class="mb-3">#}
{#          <label for="address2">Second Address<span class="text-muted">(Optional)</span></label>#}
{#          {{ form.apartment_address }}#}
{#        </div>#}
{##}
{#        <div class="row">#}
{#          <div class="col-md-5 mb-3">#}
{#            <label for="country">Country</label>#}
{#           		{{ form.country }}#}
{#            <div class="invalid-feedback">#}
{#              Please select a valid country.#}
{#            </div>#}
{#          </div>#}
{#          <div class="col-md-4 mb-3">#}
{#            <label for="state">City</label>#}
{#            <select class="custom-select d-block w-100" id="state" required>#}
{#              <option value="">Choose...</option>#}
{#              <option>California</option>#}
{#              <option>Yangon</option>#}
{##}
{#            </select>#}
{#            <div class="invalid-feedback">#}
{#              Please provide a valid state.#}
{#            </div>#}
{#          </div>#}
{#          <div class="col-md-3 mb-3">#}
{#            <label for="zip">Zip</label>#}
{#            {{ form.zip }}#}
{#            <div class="invalid-feedback">#}
{#              Zip code required.#}
{#            </div>#}
{#          </div>#}
{#        </div>#}
{#        <hr class="mb-4">#}
{#        <div class="custom-control custom-checkbox">#}
{#          <input {% if form.same_shipping_address.value %}checked{% endif %} type="checkbox" class="custom-control-input" id="same_shipping_address">#}
{#          #}
{#          <label class="custom-control-label" for="same_shipping_address">Shipping address is the same as my billing address</label>#}
{#        </div>#}
{#        <div class="custom-control custom-checkbox">#}
{#          <input {% if form.save_info.value %}checked{% endif %} type="checkbox" class="custom-control-input" id="save-info">#}
{#          #}
{#          <label class="custom-control-label" for="save-info">Save this information for next time</label>#}
{#        </div>#}
{#        <hr class="mb-4">#}
{##}
{#        <h4 class="mb-3">Payment</h4>#}
{##}
{#        <div class="d-block my-3">#}
{#        	{% for value, name in form.fields.payment_option.choices %}#}
{#          <div class="custom-control custom-radio">#}
{#            <input id="{{ name }}" name="payment_option" value="{{ value }}" type="radio" class="custom-control-input"  required>#}
{#            <label class="custom-control-label" for="{{name}}">{{ name }}</label>#}
{#          </div>#}
{#          {% endfor %}#}
{#        </div>#}
{#        #}
{#        <hr class="mb-4">#}
{#        <button class="btn btn-primary btn-lg btn-block" type="submit">Continue to checkout</button>#}
{#      </form>#}
{#    </div>#}

   <form method="POST" class="card-body">
          {% csrf_token %}

          <h3 class="mb-3" style="margin-top: 26px;">Shipping address</h3>

          <div class='hideable_shipping_form'>

            <div class="md-form mb-5">
                <label for="shipping_address" class="">Address</label>
              <input type='text' placeholder='1234 Main St' id='shipping_address' name='shipping_address' class='form-control' />
            </div>

            <div class="md-form mb-5">
                <label for="shipping_address2" class="">Address 2 (optional)</label>
              <input type='text' placeholder='Apartment or suite' id='shipping_address2' name='shipping_address2' class='form-control' />

            </div>

            <div class="row">
              <div class="col-lg-4 col-md-12 mb-4">
                <label for="country">Country</label>
                {{ form.shipping_country }}
                <div class="invalid-feedback">
                  Please select a valid country.
                </div>
              </div>
              <div class="col-lg-4 col-md-6 mb-4">
                <label for="shipping_zip">Zip</label>
                <input type='text' placeholder='Zip code' id='shipping_zip' name='shipping_zip' class='form-control' />
                <div class="invalid-feedback">
                  Zip code required.
                </div>
              </div>
            </div>

            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" name="same_billing_address" id="same_billing_address">
              <label class="custom-control-label" for="same_billing_address">Billing address is the same as my shipping address</label>
            </div>
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" name="set_default_shipping" id="set_default_shipping">
              <label class="custom-control-label" for="set_default_shipping">Save as default shipping address</label>
            </div>

          </div>

          {% if default_shipping_address %}
          <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" name="use_default_shipping" id="use_default_shipping">
            <label class="custom-control-label" for="use_default_shipping">Use default shipping address: {{ default_shipping_address.street_address|truncatechars:10 }}</label>
          </div>
          {% endif %}

          <hr>

          <h3 class="mb-3" style="margin-top: 26px;">Billing address</h3>

          <div class='hideable_billing_form'>
            <div class="md-form mb-5">
                <label for="billing_address" class="">Address</label>
              <input type='text' placeholder='1234 Main St' id='billing_address' name='billing_address' class='form-control' />

            </div>

            <div class="md-form mb-5">
                <label for="billing_address2" class="">Address 2 (optional)</label>
              <input type='text' placeholder='Apartment or suite' id='billing_address2' name='billing_address2' class='form-control' />

            </div>

            <div class="row">
              <div class="col-lg-4 col-md-12 mb-4">
                <label for="country">Country</label>
                {{ form.billing_country }}
                <div class="invalid-feedback">
                  Please select a valid country.
                </div>
              </div>

              <div class="col-lg-4 col-md-6 mb-4">
                <label for="billing_zip">Zip</label>
                <input type='text' placeholder='Zip code' id='billing_zip' name='billing_zip' class='form-control' />
                <div class="invalid-feedback">
                  Zip code required.
                </div>
              </div>

            </div>

            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" name="set_default_billing" id="set_default_billing">
              <label class="custom-control-label" for="set_default_billing">Save as default billing address</label>
            </div>

          </div>

          {% if default_billing_address %}
          <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" name="use_default_billing" id="use_default_billing">
            <label class="custom-control-label" for="use_default_billing">Use default billing address: {{ default_billing_address.street_address|truncatechars:10 }}</label>
          </div>
          {% endif %}
          <hr>

          <h3>Payment option</h3>

          <div class="d-block my-3">
            {% for value, name in form.fields.payment_option.choices %}
            <div class="custom-control custom-radio">
              <input id="{{ name }}" name="payment_option" value="{{ value }}" type="radio" class="custom-control-input" required>
              <label class="custom-control-label" for="{{ name }}">{{ name }}</label>
            </div>
            {% endfor %}
          </div>

          <hr class="mb-4">
          <button class="btn btn-primary btn-lg btn-block" type="submit">Continue to checkout</button>

        </form>


      {% include "order_snippet.html" %}


  </div>

  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1">&copy; 2017-2019 Company Name</p>
    <ul class="list-inline">
      <li class="list-inline-item"><a href="#">Privacy</a></li>
      <li class="list-inline-item"><a href="#">Terms</a></li>
      <li class="list-inline-item"><a href="#">Support</a></li>
    </ul>
  </footer>
</div>
{% endblock content %}


{% block extra_scripts %}
<script>
var hideable_shipping_form = $('.hideable_shipping_form');
var hideable_billing_form = $('.hideable_billing_form');

var use_default_shipping = document.querySelector("input[name=use_default_shipping]");
var use_default_billing = document.querySelector("input[name=use_default_billing]");

use_default_shipping.addEventListener('change', function() {
  if (this.checked) {
    hideable_shipping_form.hide();
  } else {
    hideable_shipping_form.show();
  }
})

use_default_billing.addEventListener('change', function() {
  if (this.checked) {
    hideable_billing_form.hide();
  } else {
    hideable_billing_form.show();
  }
})

</script>
{% endblock extra_scripts %}
